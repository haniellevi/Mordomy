(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,58731,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(18566),a=e.i(77183),l=e.i(76590),o=e.i(7311),s=e.i(84774),i=e.i(19455),d=e.i(27612),c=e.i(50570),u=e.i(75157);function p({expense:e,onDelete:r}){let{attributes:n,listeners:a,setNodeRef:p,transform:m,transition:f,isDragging:h}=(0,l.useSortable)({id:e.id}),x={transform:o.CSS.Transform.toString(m),transition:f,zIndex:+!!h,position:h?"relative":void 0},v=Number(e.totalAmount)-Number(e.paidAmount),g=v<=0;return(0,t.jsxs)(s.TableRow,{ref:p,style:x,className:(0,u.cn)(h?"bg-accent opacity-80":"",g?"bg-green-50/50":""),children:[(0,t.jsx)(s.TableCell,{className:"w-[50px]",children:(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",className:"cursor-move",...n,...a,children:(0,t.jsx)(c.GripVertical,{className:"h-4 w-4"})})}),(0,t.jsx)(s.TableCell,{children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"font-medium",children:e.description}),"TITHE"===e.type&&(0,t.jsx)("span",{className:"text-xs text-blue-600 font-semibold",children:"Dízimo"})]})}),(0,t.jsx)(s.TableCell,{children:e.dayOfMonth?`Dia ${e.dayOfMonth}`:"-"}),(0,t.jsx)(s.TableCell,{className:"text-right",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(e.totalAmount))}),(0,t.jsx)(s.TableCell,{className:"text-right text-green-600",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(e.paidAmount))}),(0,t.jsx)(s.TableCell,{className:"text-right text-red-600 font-medium",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(v>0?v:0)}),(0,t.jsx)(s.TableCell,{className:"w-[50px]",children:(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",onClick:()=>r(e.id),children:(0,t.jsx)(d.Trash2,{className:"h-4 w-4"})})})]})}function m({expenses:e}){let o=(0,n.useRouter)(),[i,d]=(0,r.useState)(e);(0,r.useEffect)(()=>{d(e)},[e]);let c=(0,a.useSensors)((0,a.useSensor)(a.PointerSensor),(0,a.useSensor)(a.KeyboardSensor,{coordinateGetter:l.sortableKeyboardCoordinates})),u=async e=>{let{active:t,over:r}=e;t.id!==r?.id&&d(e=>{let n=e.findIndex(e=>e.id===t.id),a=e.findIndex(e=>e.id===r?.id),o=(0,l.arrayMove)(e,n,a);return console.log("New expense order:",o.map(e=>e.id)),o})},m=async e=>{if(confirm("Tem certeza que deseja excluir?"))try{await fetch(`/api/expenses/${e}`,{method:"DELETE"}),o.refresh()}catch(e){console.error("Failed to delete",e)}},f=i.reduce((e,t)=>e+Number(t.totalAmount),0),h=i.reduce((e,t)=>e+Number(t.paidAmount),0),x=f-h;return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"rounded-md border bg-card",children:(0,t.jsx)(a.DndContext,{sensors:c,collisionDetection:a.closestCenter,onDragEnd:u,children:(0,t.jsxs)(s.Table,{children:[(0,t.jsx)(s.TableHeader,{children:(0,t.jsxs)(s.TableRow,{children:[(0,t.jsx)(s.TableHead,{className:"w-[50px]"}),(0,t.jsx)(s.TableHead,{children:"Descrição"}),(0,t.jsx)(s.TableHead,{children:"Dia"}),(0,t.jsx)(s.TableHead,{className:"text-right",children:"Total"}),(0,t.jsx)(s.TableHead,{className:"text-right",children:"Pago"}),(0,t.jsx)(s.TableHead,{className:"text-right",children:"Falta"}),(0,t.jsx)(s.TableHead,{className:"w-[50px]"})]})}),(0,t.jsxs)(s.TableBody,{children:[(0,t.jsx)(l.SortableContext,{items:i.map(e=>e.id),strategy:l.verticalListSortingStrategy,children:i.map(e=>(0,t.jsx)(p,{expense:e,onDelete:m},e.id))}),0===i.length&&(0,t.jsx)(s.TableRow,{children:(0,t.jsx)(s.TableCell,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"Nenhuma saída registrada."})})]})]})})}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row justify-end items-end md:items-center gap-4 text-sm font-medium",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("span",{children:"Total Previsto:"}),(0,t.jsx)("span",{className:"text-foreground",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(f)})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("span",{children:"Total Pago:"}),(0,t.jsx)("span",{className:"text-green-600",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(h)})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("span",{children:"Falta Pagar:"}),(0,t.jsx)("span",{className:"text-red-600",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(x>0?x:0)})]})]})]})}e.s(["ExpenseTable",()=>m])},28443,e=>{"use strict";let t,r,n;var a=e.i(43476),l=e.i(71645),o=e.i(18566),s=e.i(19455),i=e.i(76639),d=e.i(93479),c=e.i(10204),u=e.i(74323),p=e.i(74080);function m(e,[t,r]){return Math.min(r,Math.max(t,e))}var f=e.i(81140),h=e.i(75830),x=e.i(20783),v=e.i(30030),g=e.i(86318),y=e.i(26330),w=e.i(3536),b=e.i(65491),j=e.i(10772),N=e.i(53660),S=e.i(74606),C=e.i(48425),R=Symbol("radix.slottable");function T(e){return l.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===R}var E=e.i(30207),P=e.i(69340),D=e.i(34620),I=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"});l.forwardRef((e,t)=>(0,a.jsx)(C.Primitive.span,{...e,ref:t,style:{...I,...e.style}})).displayName="VisuallyHidden";var H=e.i(86312),L=e.i(85369),A=[" ","Enter","ArrowUp","ArrowDown"],k=[" ","Enter"],B="Select",[M,F,O]=(0,h.createCollection)(B),[V,_]=(0,v.createContextScope)(B,[O,N.createPopperScope]),z=(0,N.createPopperScope)(),[K,W]=V(B),[U,q]=V(B),G=e=>{let{__scopeSelect:t,children:r,open:n,defaultOpen:o,onOpenChange:s,value:i,defaultValue:d,onValueChange:c,dir:u,name:p,autoComplete:m,disabled:f,required:h,form:x}=e,v=z(t),[y,w]=l.useState(null),[b,S]=l.useState(null),[C,R]=l.useState(!1),T=(0,g.useDirection)(u),[E,D]=(0,P.useControllableState)({prop:n,defaultProp:o??!1,onChange:s,caller:B}),[I,H]=(0,P.useControllableState)({prop:i,defaultProp:d,onChange:c,caller:B}),L=l.useRef(null),A=!y||x||!!y.closest("form"),[k,F]=l.useState(new Set),O=Array.from(k).map(e=>e.props.value).join(";");return(0,a.jsx)(N.Root,{...v,children:(0,a.jsxs)(K,{required:h,scope:t,trigger:y,onTriggerChange:w,valueNode:b,onValueNodeChange:S,valueNodeHasChildren:C,onValueNodeHasChildrenChange:R,contentId:(0,j.useId)(),value:I,onValueChange:H,open:E,onOpenChange:D,dir:T,triggerPointerDownPosRef:L,disabled:f,children:[(0,a.jsx)(M.Provider,{scope:t,children:(0,a.jsx)(U,{scope:e.__scopeSelect,onNativeOptionAdd:l.useCallback(e=>{F(t=>new Set(t).add(e))},[]),onNativeOptionRemove:l.useCallback(e=>{F(t=>{let r=new Set(t);return r.delete(e),r})},[]),children:r})}),A?(0,a.jsxs)(eH,{"aria-hidden":!0,required:h,tabIndex:-1,name:p,autoComplete:m,value:I,onChange:e=>H(e.target.value),disabled:f,form:x,children:[void 0===I?(0,a.jsx)("option",{value:""}):null,Array.from(k)]},O):null]})})};G.displayName=B;var X="SelectTrigger",Y=l.forwardRef((e,t)=>{let{__scopeSelect:r,disabled:n=!1,...o}=e,s=z(r),i=W(X,r),d=i.disabled||n,c=(0,x.useComposedRefs)(t,i.onTriggerChange),u=F(r),p=l.useRef("touch"),[m,h,v]=eA(e=>{let t=u().filter(e=>!e.disabled),r=t.find(e=>e.value===i.value),n=ek(t,e,r);void 0!==n&&i.onValueChange(n.value)}),g=e=>{d||(i.onOpenChange(!0),v()),e&&(i.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return(0,a.jsx)(N.Anchor,{asChild:!0,...s,children:(0,a.jsx)(C.Primitive.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:d,"data-disabled":d?"":void 0,"data-placeholder":eL(i.value)?"":void 0,...o,ref:c,onClick:(0,f.composeEventHandlers)(o.onClick,e=>{e.currentTarget.focus(),"mouse"!==p.current&&g(e)}),onPointerDown:(0,f.composeEventHandlers)(o.onPointerDown,e=>{p.current=e.pointerType;let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(g(e),e.preventDefault())}),onKeyDown:(0,f.composeEventHandlers)(o.onKeyDown,e=>{let t=""!==m.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||h(e.key),(!t||" "!==e.key)&&A.includes(e.key)&&(g(),e.preventDefault())})})})});Y.displayName=X;var Z="SelectValue",$=l.forwardRef((e,t)=>{let{__scopeSelect:r,className:n,style:l,children:o,placeholder:s="",...i}=e,d=W(Z,r),{onValueNodeHasChildrenChange:c}=d,u=void 0!==o,p=(0,x.useComposedRefs)(t,d.onValueNodeChange);return(0,D.useLayoutEffect)(()=>{c(u)},[c,u]),(0,a.jsx)(C.Primitive.span,{...i,ref:p,style:{pointerEvents:"none"},children:eL(d.value)?(0,a.jsx)(a.Fragment,{children:s}):o})});$.displayName=Z;var J=l.forwardRef((e,t)=>{let{__scopeSelect:r,children:n,...l}=e;return(0,a.jsx)(C.Primitive.span,{"aria-hidden":!0,...l,ref:t,children:n||"▼"})});J.displayName="SelectIcon";var Q=e=>(0,a.jsx)(S.Portal,{asChild:!0,...e});Q.displayName="SelectPortal";var ee="SelectContent",et=l.forwardRef((e,t)=>{let r=W(ee,e.__scopeSelect),[n,o]=l.useState();return((0,D.useLayoutEffect)(()=>{o(new DocumentFragment)},[]),r.open)?(0,a.jsx)(el,{...e,ref:t}):n?p.createPortal((0,a.jsx)(er,{scope:e.__scopeSelect,children:(0,a.jsx)(M.Slot,{scope:e.__scopeSelect,children:(0,a.jsx)("div",{children:e.children})})}),n):null});et.displayName=ee;var[er,en]=V(ee),ea=((n=l.forwardRef((e,t)=>{let{children:r,...n}=e;if(l.isValidElement(r)){var a;let e,o,s=(a=r,(o=(e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?a.ref:(o=(e=Object.getOwnPropertyDescriptor(a,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?a.props.ref:a.props.ref||a.ref),i=function(e,t){let r={...t};for(let n in t){let a=e[n],l=t[n];/^on[A-Z]/.test(n)?a&&l?r[n]=(...e)=>{let t=l(...e);return a(...e),t}:a&&(r[n]=a):"style"===n?r[n]={...a,...l}:"className"===n&&(r[n]=[a,l].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==l.Fragment&&(i.ref=t?(0,x.composeRefs)(t,s):s),l.cloneElement(r,i)}return l.Children.count(r)>1?l.Children.only(null):null})).displayName="SelectContent.RemoveScroll.SlotClone",t=n,(r=l.forwardRef((e,r)=>{let{children:n,...o}=e,s=l.Children.toArray(n),i=s.find(T);if(i){let e=i.props.children,n=s.map(t=>t!==i?t:l.Children.count(e)>1?l.Children.only(null):l.isValidElement(e)?e.props.children:null);return(0,a.jsx)(t,{...o,ref:r,children:l.isValidElement(e)?l.cloneElement(e,void 0,n):null})}return(0,a.jsx)(t,{...o,ref:r,children:n})})).displayName="SelectContent.RemoveScroll.Slot",r),el=l.forwardRef((e,t)=>{let{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:s,onPointerDownOutside:i,side:d,sideOffset:c,align:u,alignOffset:p,arrowPadding:m,collisionBoundary:h,collisionPadding:v,sticky:g,hideWhenDetached:j,avoidCollisions:N,...S}=e,C=W(ee,r),[R,T]=l.useState(null),[E,P]=l.useState(null),D=(0,x.useComposedRefs)(t,e=>T(e)),[I,A]=l.useState(null),[k,B]=l.useState(null),M=F(r),[O,V]=l.useState(!1),_=l.useRef(!1);l.useEffect(()=>{if(R)return(0,H.hideOthers)(R)},[R]),(0,w.useFocusGuards)();let z=l.useCallback(e=>{let[t,...r]=M().map(e=>e.ref.current),[n]=r.slice(-1),a=document.activeElement;for(let r of e)if(r===a||(r?.scrollIntoView({block:"nearest"}),r===t&&E&&(E.scrollTop=0),r===n&&E&&(E.scrollTop=E.scrollHeight),r?.focus(),document.activeElement!==a))return},[M,E]),K=l.useCallback(()=>z([I,R]),[z,I,R]);l.useEffect(()=>{O&&K()},[O,K]);let{onOpenChange:U,triggerPointerDownPosRef:q}=C;l.useEffect(()=>{if(R){let e={x:0,y:0},t=t=>{e={x:Math.abs(Math.round(t.pageX)-(q.current?.x??0)),y:Math.abs(Math.round(t.pageY)-(q.current?.y??0))}},r=r=>{e.x<=10&&e.y<=10?r.preventDefault():R.contains(r.target)||U(!1),document.removeEventListener("pointermove",t),q.current=null};return null!==q.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",r,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",r,{capture:!0})}}},[R,U,q]),l.useEffect(()=>{let e=()=>U(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[U]);let[G,X]=eA(e=>{let t=M().filter(e=>!e.disabled),r=t.find(e=>e.ref.current===document.activeElement),n=ek(t,e,r);n&&setTimeout(()=>n.ref.current.focus())}),Y=l.useCallback((e,t,r)=>{let n=!_.current&&!r;(void 0!==C.value&&C.value===t||n)&&(A(e),n&&(_.current=!0))},[C.value]),Z=l.useCallback(()=>R?.focus(),[R]),$=l.useCallback((e,t,r)=>{let n=!_.current&&!r;(void 0!==C.value&&C.value===t||n)&&B(e)},[C.value]),J="popper"===n?es:eo,Q=J===es?{side:d,sideOffset:c,align:u,alignOffset:p,arrowPadding:m,collisionBoundary:h,collisionPadding:v,sticky:g,hideWhenDetached:j,avoidCollisions:N}:{};return(0,a.jsx)(er,{scope:r,content:R,viewport:E,onViewportChange:P,itemRefCallback:Y,selectedItem:I,onItemLeave:Z,itemTextRefCallback:$,focusSelectedItem:K,selectedItemText:k,position:n,isPositioned:O,searchRef:G,children:(0,a.jsx)(L.RemoveScroll,{as:ea,allowPinchZoom:!0,children:(0,a.jsx)(b.FocusScope,{asChild:!0,trapped:C.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:(0,f.composeEventHandlers)(o,e=>{C.trigger?.focus({preventScroll:!0}),e.preventDefault()}),children:(0,a.jsx)(y.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>C.onOpenChange(!1),children:(0,a.jsx)(J,{role:"listbox",id:C.contentId,"data-state":C.open?"open":"closed",dir:C.dir,onContextMenu:e=>e.preventDefault(),...S,...Q,onPlaced:()=>V(!0),ref:D,style:{display:"flex",flexDirection:"column",outline:"none",...S.style},onKeyDown:(0,f.composeEventHandlers)(S.onKeyDown,e=>{let t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||X(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=M().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){let r=e.target,n=t.indexOf(r);t=t.slice(n+1)}setTimeout(()=>z(t)),e.preventDefault()}})})})})})})});el.displayName="SelectContentImpl";var eo=l.forwardRef((e,t)=>{let{__scopeSelect:r,onPlaced:n,...o}=e,s=W(ee,r),i=en(ee,r),[d,c]=l.useState(null),[u,p]=l.useState(null),f=(0,x.useComposedRefs)(t,e=>p(e)),h=F(r),v=l.useRef(!1),g=l.useRef(!0),{viewport:y,selectedItem:w,selectedItemText:b,focusSelectedItem:j}=i,N=l.useCallback(()=>{if(s.trigger&&s.valueNode&&d&&u&&y&&w&&b){let e=s.trigger.getBoundingClientRect(),t=u.getBoundingClientRect(),r=s.valueNode.getBoundingClientRect(),a=b.getBoundingClientRect();if("rtl"!==s.dir){let n=a.left-t.left,l=r.left-n,o=e.left-l,s=e.width+o,i=Math.max(s,t.width),c=m(l,[10,Math.max(10,window.innerWidth-10-i)]);d.style.minWidth=s+"px",d.style.left=c+"px"}else{let n=t.right-a.right,l=window.innerWidth-r.right-n,o=window.innerWidth-e.right-l,s=e.width+o,i=Math.max(s,t.width),c=m(l,[10,Math.max(10,window.innerWidth-10-i)]);d.style.minWidth=s+"px",d.style.right=c+"px"}let l=h(),o=window.innerHeight-20,i=y.scrollHeight,c=window.getComputedStyle(u),p=parseInt(c.borderTopWidth,10),f=parseInt(c.paddingTop,10),x=parseInt(c.borderBottomWidth,10),g=p+f+i+parseInt(c.paddingBottom,10)+x,j=Math.min(5*w.offsetHeight,g),N=window.getComputedStyle(y),S=parseInt(N.paddingTop,10),C=parseInt(N.paddingBottom,10),R=e.top+e.height/2-10,T=w.offsetHeight/2,E=p+f+(w.offsetTop+T);if(E<=R){let e=l.length>0&&w===l[l.length-1].ref.current;d.style.bottom="0px";let t=Math.max(o-R,T+(e?C:0)+(u.clientHeight-y.offsetTop-y.offsetHeight)+x);d.style.height=E+t+"px"}else{let e=l.length>0&&w===l[0].ref.current;d.style.top="0px";let t=Math.max(R,p+y.offsetTop+(e?S:0)+T);d.style.height=t+(g-E)+"px",y.scrollTop=E-R+y.offsetTop}d.style.margin="10px 0",d.style.minHeight=j+"px",d.style.maxHeight=o+"px",n?.(),requestAnimationFrame(()=>v.current=!0)}},[h,s.trigger,s.valueNode,d,u,y,w,b,s.dir,n]);(0,D.useLayoutEffect)(()=>N(),[N]);let[S,R]=l.useState();(0,D.useLayoutEffect)(()=>{u&&R(window.getComputedStyle(u).zIndex)},[u]);let T=l.useCallback(e=>{e&&!0===g.current&&(N(),j?.(),g.current=!1)},[N,j]);return(0,a.jsx)(ei,{scope:r,contentWrapper:d,shouldExpandOnScrollRef:v,onScrollButtonChange:T,children:(0,a.jsx)("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:(0,a.jsx)(C.Primitive.div,{...o,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});eo.displayName="SelectItemAlignedPosition";var es=l.forwardRef((e,t)=>{let{__scopeSelect:r,align:n="start",collisionPadding:l=10,...o}=e,s=z(r);return(0,a.jsx)(N.Content,{...s,...o,ref:t,align:n,collisionPadding:l,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});es.displayName="SelectPopperPosition";var[ei,ed]=V(ee,{}),ec="SelectViewport",eu=l.forwardRef((e,t)=>{let{__scopeSelect:r,nonce:n,...o}=e,s=en(ec,r),i=ed(ec,r),d=(0,x.useComposedRefs)(t,s.onViewportChange),c=l.useRef(0);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),(0,a.jsx)(M.Slot,{scope:r,children:(0,a.jsx)(C.Primitive.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:d,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:(0,f.composeEventHandlers)(o.onScroll,e=>{let t=e.currentTarget,{contentWrapper:r,shouldExpandOnScrollRef:n}=i;if(n?.current&&r){let e=Math.abs(c.current-t.scrollTop);if(e>0){let n=window.innerHeight-20,a=Math.max(parseFloat(r.style.minHeight),parseFloat(r.style.height));if(a<n){let l=a+e,o=Math.min(n,l),s=l-o;r.style.height=o+"px","0px"===r.style.bottom&&(t.scrollTop=s>0?s:0,r.style.justifyContent="flex-end")}}}c.current=t.scrollTop})})})]})});eu.displayName=ec;var ep="SelectGroup",[em,ef]=V(ep);l.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e,l=(0,j.useId)();return(0,a.jsx)(em,{scope:r,id:l,children:(0,a.jsx)(C.Primitive.div,{role:"group","aria-labelledby":l,...n,ref:t})})}).displayName=ep;var eh="SelectLabel",ex=l.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e,l=ef(eh,r);return(0,a.jsx)(C.Primitive.div,{id:l.id,...n,ref:t})});ex.displayName=eh;var ev="SelectItem",[eg,ey]=V(ev),ew=l.forwardRef((e,t)=>{let{__scopeSelect:r,value:n,disabled:o=!1,textValue:s,...i}=e,d=W(ev,r),c=en(ev,r),u=d.value===n,[p,m]=l.useState(s??""),[h,v]=l.useState(!1),g=(0,x.useComposedRefs)(t,e=>c.itemRefCallback?.(e,n,o)),y=(0,j.useId)(),w=l.useRef("touch"),b=()=>{o||(d.onValueChange(n),d.onOpenChange(!1))};if(""===n)throw Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,a.jsx)(eg,{scope:r,value:n,disabled:o,textId:y,isSelected:u,onItemTextChange:l.useCallback(e=>{m(t=>t||(e?.textContent??"").trim())},[]),children:(0,a.jsx)(M.ItemSlot,{scope:r,value:n,disabled:o,textValue:p,children:(0,a.jsx)(C.Primitive.div,{role:"option","aria-labelledby":y,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...i,ref:g,onFocus:(0,f.composeEventHandlers)(i.onFocus,()=>v(!0)),onBlur:(0,f.composeEventHandlers)(i.onBlur,()=>v(!1)),onClick:(0,f.composeEventHandlers)(i.onClick,()=>{"mouse"!==w.current&&b()}),onPointerUp:(0,f.composeEventHandlers)(i.onPointerUp,()=>{"mouse"===w.current&&b()}),onPointerDown:(0,f.composeEventHandlers)(i.onPointerDown,e=>{w.current=e.pointerType}),onPointerMove:(0,f.composeEventHandlers)(i.onPointerMove,e=>{w.current=e.pointerType,o?c.onItemLeave?.():"mouse"===w.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:(0,f.composeEventHandlers)(i.onPointerLeave,e=>{e.currentTarget===document.activeElement&&c.onItemLeave?.()}),onKeyDown:(0,f.composeEventHandlers)(i.onKeyDown,e=>{(c.searchRef?.current===""||" "!==e.key)&&(k.includes(e.key)&&b()," "===e.key&&e.preventDefault())})})})})});ew.displayName=ev;var eb="SelectItemText",ej=l.forwardRef((e,t)=>{let{__scopeSelect:r,className:n,style:o,...s}=e,i=W(eb,r),d=en(eb,r),c=ey(eb,r),u=q(eb,r),[m,f]=l.useState(null),h=(0,x.useComposedRefs)(t,e=>f(e),c.onItemTextChange,e=>d.itemTextRefCallback?.(e,c.value,c.disabled)),v=m?.textContent,g=l.useMemo(()=>(0,a.jsx)("option",{value:c.value,disabled:c.disabled,children:v},c.value),[c.disabled,c.value,v]),{onNativeOptionAdd:y,onNativeOptionRemove:w}=u;return(0,D.useLayoutEffect)(()=>(y(g),()=>w(g)),[y,w,g]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.Primitive.span,{id:c.textId,...s,ref:h}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?p.createPortal(s.children,i.valueNode):null]})});ej.displayName=eb;var eN="SelectItemIndicator",eS=l.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e;return ey(eN,r).isSelected?(0,a.jsx)(C.Primitive.span,{"aria-hidden":!0,...n,ref:t}):null});eS.displayName=eN;var eC="SelectScrollUpButton",eR=l.forwardRef((e,t)=>{let r=en(eC,e.__scopeSelect),n=ed(eC,e.__scopeSelect),[o,s]=l.useState(!1),i=(0,x.useComposedRefs)(t,n.onScrollButtonChange);return(0,D.useLayoutEffect)(()=>{if(r.viewport&&r.isPositioned){let e=function(){s(t.scrollTop>0)},t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),o?(0,a.jsx)(eP,{...e,ref:i,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null});eR.displayName=eC;var eT="SelectScrollDownButton",eE=l.forwardRef((e,t)=>{let r=en(eT,e.__scopeSelect),n=ed(eT,e.__scopeSelect),[o,s]=l.useState(!1),i=(0,x.useComposedRefs)(t,n.onScrollButtonChange);return(0,D.useLayoutEffect)(()=>{if(r.viewport&&r.isPositioned){let e=function(){let e=t.scrollHeight-t.clientHeight;s(Math.ceil(t.scrollTop)<e)},t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),o?(0,a.jsx)(eP,{...e,ref:i,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null});eE.displayName=eT;var eP=l.forwardRef((e,t)=>{let{__scopeSelect:r,onAutoScroll:n,...o}=e,s=en("SelectScrollButton",r),i=l.useRef(null),d=F(r),c=l.useCallback(()=>{null!==i.current&&(window.clearInterval(i.current),i.current=null)},[]);return l.useEffect(()=>()=>c(),[c]),(0,D.useLayoutEffect)(()=>{let e=d().find(e=>e.ref.current===document.activeElement);e?.ref.current?.scrollIntoView({block:"nearest"})},[d]),(0,a.jsx)(C.Primitive.div,{"aria-hidden":!0,...o,ref:t,style:{flexShrink:0,...o.style},onPointerDown:(0,f.composeEventHandlers)(o.onPointerDown,()=>{null===i.current&&(i.current=window.setInterval(n,50))}),onPointerMove:(0,f.composeEventHandlers)(o.onPointerMove,()=>{s.onItemLeave?.(),null===i.current&&(i.current=window.setInterval(n,50))}),onPointerLeave:(0,f.composeEventHandlers)(o.onPointerLeave,()=>{c()})})}),eD=l.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e;return(0,a.jsx)(C.Primitive.div,{"aria-hidden":!0,...n,ref:t})});eD.displayName="SelectSeparator";var eI="SelectArrow";l.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e,l=z(r),o=W(eI,r),s=en(eI,r);return o.open&&"popper"===s.position?(0,a.jsx)(N.Arrow,{...l,...n,ref:t}):null}).displayName=eI;var eH=l.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{let o,s=l.useRef(null),i=(0,x.useComposedRefs)(n,s),d=(o=l.useRef({value:t,previous:t}),l.useMemo(()=>(o.current.value!==t&&(o.current.previous=o.current.value,o.current.value=t),o.current.previous),[t]));return l.useEffect(()=>{let e=s.current;if(!e)return;let r=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(d!==t&&r){let n=new Event("change",{bubbles:!0});r.call(e,t),e.dispatchEvent(n)}},[d,t]),(0,a.jsx)(C.Primitive.select,{...r,style:{...I,...r.style},ref:i,defaultValue:t})});function eL(e){return""===e||void 0===e}function eA(e){let t=(0,E.useCallbackRef)(e),r=l.useRef(""),n=l.useRef(0),a=l.useCallback(e=>{let a=r.current+e;t(a),function e(t){r.current=t,window.clearTimeout(n.current),""!==t&&(n.current=window.setTimeout(()=>e(""),1e3))}(a)},[t]),o=l.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return l.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,o]}function ek(e,t,r){var n,a;let l=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,o=r?e.indexOf(r):-1,s=(n=e,a=Math.max(o,0),n.map((e,t)=>n[(a+t)%n.length]));1===l.length&&(s=s.filter(e=>e!==r));let i=s.find(e=>e.textValue.toLowerCase().startsWith(l.toLowerCase()));return i!==r?i:void 0}eH.displayName="SelectBubbleInput";var eB=e.i(75157),eM=e.i(72226);let eF=l.forwardRef(({className:e,children:t,...r},n)=>(0,a.jsxs)(Y,{ref:n,className:(0,eB.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,(0,a.jsx)(J,{asChild:!0,children:(0,a.jsx)(eM.ChevronDownIcon,{className:"h-4 w-4 opacity-50"})})]}));eF.displayName=Y.displayName;let eO=l.forwardRef(({className:e,...t},r)=>(0,a.jsx)(eR,{ref:r,className:(0,eB.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,a.jsx)(eM.ChevronUpIcon,{className:"h-4 w-4"})}));eO.displayName=eR.displayName;let eV=l.forwardRef(({className:e,...t},r)=>(0,a.jsx)(eE,{ref:r,className:(0,eB.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,a.jsx)(eM.ChevronDownIcon,{className:"h-4 w-4"})}));eV.displayName=eE.displayName;let e_=l.forwardRef(({className:e,children:t,position:r="popper",...n},l)=>(0,a.jsx)(Q,{children:(0,a.jsxs)(et,{ref:l,className:(0,eB.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[(0,a.jsx)(eO,{}),(0,a.jsx)(eu,{className:(0,eB.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,a.jsx)(eV,{})]})}));e_.displayName=et.displayName,l.forwardRef(({className:e,...t},r)=>(0,a.jsx)(ex,{ref:r,className:(0,eB.cn)("px-2 py-1.5 text-sm font-semibold",e),...t})).displayName=ex.displayName;let ez=l.forwardRef(({className:e,children:t,...r},n)=>(0,a.jsxs)(ew,{ref:n,className:(0,eB.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[(0,a.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(eS,{children:(0,a.jsx)(eM.CheckIcon,{className:"h-4 w-4"})})}),(0,a.jsx)(ej,{children:t})]}));function eK({monthId:e}){let t=(0,o.useRouter)(),[r,n]=(0,l.useState)(!1),[p,m]=(0,l.useState)(!1),[f,h]=(0,l.useState)(""),[x,v]=(0,l.useState)(""),[g,y]=(0,l.useState)(""),[w,b]=(0,l.useState)(""),[j,N]=(0,l.useState)("STANDARD"),S=async r=>{if(r.preventDefault(),f&&x){m(!0);try{(await fetch("/api/expenses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({monthId:e,description:f,totalAmount:x,paidAmount:g||"0",dayOfMonth:w||null,type:j})})).ok?(n(!1),h(""),v(""),y(""),b(""),N("STANDARD"),t.refresh()):alert("Erro ao adicionar saída.")}catch(e){console.error(e)}finally{m(!1)}}};return(0,a.jsxs)(i.Dialog,{open:r,onOpenChange:n,children:[(0,a.jsx)(i.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(s.Button,{size:"sm",variant:"outline",children:[(0,a.jsx)(u.PlusCircle,{className:"mr-2 h-4 w-4"}),"Adicionar"]})}),(0,a.jsxs)(i.DialogContent,{className:"sm:max-w-[425px]",children:[(0,a.jsxs)(i.DialogHeader,{children:[(0,a.jsx)(i.DialogTitle,{children:"Nova Saída"}),(0,a.jsx)(i.DialogDescription,{children:"Adicione uma nova saída financeira para este mês."})]}),(0,a.jsxs)("form",{onSubmit:S,children:[(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(c.Label,{htmlFor:"description",className:"text-right",children:"Descrição"}),(0,a.jsx)(d.Input,{id:"description",value:f,onChange:e=>h(e.target.value),className:"col-span-3",required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(c.Label,{htmlFor:"totalAmount",className:"text-right",children:"Valor Total"}),(0,a.jsx)(d.Input,{id:"totalAmount",type:"number",step:"0.01",value:x,onChange:e=>v(e.target.value),className:"col-span-3",required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(c.Label,{htmlFor:"paidAmount",className:"text-right",children:"Pago"}),(0,a.jsx)(d.Input,{id:"paidAmount",type:"number",step:"0.01",value:g,onChange:e=>y(e.target.value),className:"col-span-3",placeholder:"Opcional"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(c.Label,{htmlFor:"dayOfMonth",className:"text-right",children:"Dia"}),(0,a.jsx)(d.Input,{id:"dayOfMonth",type:"number",min:"1",max:"31",value:w,onChange:e=>b(e.target.value),className:"col-span-3",placeholder:"Opcional"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(c.Label,{htmlFor:"type",className:"text-right",children:"Tipo"}),(0,a.jsxs)(G,{onValueChange:N,value:j,children:[(0,a.jsx)(eF,{className:"col-span-3",children:(0,a.jsx)($,{placeholder:"Selecione o tipo"})}),(0,a.jsxs)(e_,{children:[(0,a.jsx)(ez,{value:"STANDARD",children:"Padrão"}),(0,a.jsx)(ez,{value:"TITHE",children:"Dízimo"})]})]})]})]}),(0,a.jsx)(i.DialogFooter,{children:(0,a.jsx)(s.Button,{type:"submit",disabled:p,children:p?"Salvando...":"Salvar"})})]})]})]})}ez.displayName=ew.displayName,l.forwardRef(({className:e,...t},r)=>(0,a.jsx)(eD,{ref:r,className:(0,eB.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=eD.displayName,e.s(["AddExpenseDialog",()=>eK],28443)}]);