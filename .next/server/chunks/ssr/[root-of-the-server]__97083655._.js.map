{"version":3,"sources":["../../../../src/lib/prisma.ts","../../../../src/components/ui/card.tsx","../../../../src/components/layout/bottom-nav.tsx/__nextjs-internal-proxy.mjs","../../../../src/components/finance/investment-table.tsx/__nextjs-internal-proxy.mjs","../../../../src/components/finance/add-investment-dialog.tsx/__nextjs-internal-proxy.mjs","../../../../src/app/%28dashboard%29/%5Byear%5D/%5Bmonth%5D/investments/page.tsx"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\r\n\r\nconst globalForPrisma = global as unknown as { prisma: PrismaClient };\r\n\r\nexport const prisma =\r\n    globalForPrisma.prisma ||\r\n    new PrismaClient({\r\n        log: [\"query\"],\r\n    });\r\n\r\nif (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = prisma;\r\n","import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-xl border bg-card text-card-foreground shadow\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"font-semibold leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const BottomNav = registerClientReference(\n    function() { throw new Error(\"Attempted to call BottomNav() from the server but BottomNav is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/layout/bottom-nav.tsx\",\n    \"BottomNav\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const InvestmentTable = registerClientReference(\n    function() { throw new Error(\"Attempted to call InvestmentTable() from the server but InvestmentTable is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/finance/investment-table.tsx\",\n    \"InvestmentTable\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AddInvestmentDialog = registerClientReference(\n    function() { throw new Error(\"Attempted to call AddInvestmentDialog() from the server but AddInvestmentDialog is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/finance/add-investment-dialog.tsx\",\n    \"AddInvestmentDialog\",\n);\n","import { redirect } from \"next/navigation\";\r\nimport { getCurrentUser } from \"@/lib/session\";\r\nimport { prisma } from \"@/lib/prisma\";\r\nimport { InvestmentTable } from \"@/components/finance/investment-table\";\r\nimport { AddInvestmentDialog } from \"@/components/finance/add-investment-dialog\";\r\nimport { BottomNav } from \"@/components/layout/bottom-nav\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { formatCurrency } from \"@/lib/utils\";\r\n\r\ninterface InvestmentsPageProps {\r\n    params: Promise<{\r\n        year: string;\r\n        month: string;\r\n    }>;\r\n}\r\n\r\nexport default async function InvestmentsPage({ params }: InvestmentsPageProps) {\r\n    const user = await getCurrentUser();\r\n\r\n    if (!user) {\r\n        redirect(\"/login\");\r\n    }\r\n\r\n    const { year: yearStr, month: monthStr } = await params;\r\n    const year = parseInt(yearStr);\r\n    const month = parseInt(monthStr);\r\n\r\n    const monthData = await prisma.month.findFirst({\r\n        where: {\r\n            userId: user.id,\r\n            year: year,\r\n            month: month,\r\n        },\r\n        include: {\r\n            investments: true,\r\n        },\r\n    });\r\n\r\n    if (!monthData) {\r\n        redirect(\"/\");\r\n    }\r\n\r\n    const totalInvestments = monthData.investments.reduce(\r\n        (sum, investment) => sum + Number(investment.amount),\r\n        0\r\n    );\r\n\r\n    // Converter Decimal para number para Client Components\r\n    const investmentsData = monthData.investments.map(inv => ({\r\n        ...inv,\r\n        amount: Number(inv.amount),\r\n    }));\r\n\r\n    return (\r\n        <>\r\n            <div className=\"container mx-auto p-4 space-y-6\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <h1 className=\"text-2xl font-bold\">Investimentos</h1>\r\n                    <AddInvestmentDialog monthId={monthData.id} />\r\n                </div>\r\n\r\n                <Card className=\"bg-primary/10 border-primary/20\">\r\n                    <CardHeader>\r\n                        <CardTitle className=\"text-sm font-medium text-muted-foreground\">\r\n                            Total de Investimentos\r\n                        </CardTitle>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <p className=\"text-3xl font-bold text-primary\">\r\n                            {formatCurrency(totalInvestments)}\r\n                        </p>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                <InvestmentTable investments={investmentsData} />\r\n            </div>\r\n\r\n            <BottomNav year={yearStr} month={monthStr} />\r\n        </>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","ignoreList":[2,3,4]}